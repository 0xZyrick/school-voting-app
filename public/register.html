<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Register School</title>

  <style>
        .container {
      max-width: 1100px;
      margin: auto;
    }

    h2 {
      font-size: 2rem;
      margin-bottom: 0.5rem;
    }

    .subtext {
      color: #444;
      margin-bottom: 2rem;
    }

    .info-box {
      display: flex;
      justify-content: space-between;
      flex-wrap: wrap;
      margin-bottom: 2rem;
      gap: 2rem;
    }

    .info-text {
      max-width: 50%;
    }

    .info-text p {
      margin: 0.5rem 0;
      font-size: 1rem;
    }

    .info-text strong {
      display: inline-block;
      min-width: 140px;
    }

    .upload-box {
      border: 2px dashed #ccc;
      padding: 40px;
      text-align: center;
      width: 100%;
      max-width: 350px;
      align-self: center;
      cursor: pointer;
      transition: 0.3s ease;
    }

    .upload-box:hover {
      border-color: #888;
    }

    .upload-box input {
      display: none;
    }

    form {
      display: flex;
      flex-direction: column;
      gap: 2rem;
    }

    .form-row {
      display: flex;
      flex-direction: row;
      gap: 50px;
    }

    .form-group {
      flex: 1 1 48%;
      display: flex;
      flex-direction: column;
    }

    .form-group input,
    .form-group select {
      padding: 14px 20px;
      border-radius: 30px;
      border: 1px solid #ccc;
      font-size: 1rem;
      outline: none;
      transition: border 0.2s;
    }

    .form-group input:focus,
    .form-group select:focus {
      border-color: #333;
    }

    .submit-btn {
      background: #008000;
      color: #fff;
      border: none;
      padding: 14px 30px;
      font-size: 1rem;
      border-radius: 10px;
      cursor: pointer;
      width: fit-content;
      align-self: center;
    }

    .submit-btn:hover {
      background: #006600;
    }

    @media (max-width: 900px) {
      .info-text {
        max-width: 100%;
      }

      .form-group {
        flex: 1 1 100%;
      }

      .upload-box {
        margin: auto;
      }
    }

       .modal {
      display: none;
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
      justify-content: center;
      align-items: center;
      z-index: 1000;
    }

    .modal-content {
      background-color: #fff;
      padding: 2rem;
      border-radius: 8px;
      text-align: center;
      max-width: 400px;
      margin: auto;
    }

    .close {
      float: right;
      font-size: 1.5rem;
      cursor: pointer;
    }

    button:disabled {
      opacity: 0.6;
      cursor: not-allowed;
    }
  </style>

  <link rel="stylesheet" href="./assets/styles.css">

</head>

<body>
  <header>
    <nav class="main-navbar">
      <div class="navbar-brand">
        <img src="./assets/Assets/logo.jpg" alt="Company Logo" class="logo">
        <span class="company-name">Braintree Company</span>
      </div>
      <ul class="navbarLinks">
        <li><a href="./index.html">HOME</a></li>
        <li><a href="./register.html">REGISTER</a></li>
        <li><a href="./vote.html">VOTE</a></li>
      </ul>
      <a href="./register.html" class="navCta">Register Now</a>
      <div class="navbar-Hamburger">
        <span></span><span></span><span></span>
      </div>
    </nav>

    <div class="nav-dropdown">
      <ul>
        <li><a href="./index.html">HOME</a></li>
        <li><a href="./register.html">REGISTER</a></li>
        <li><a href="./vote.html">VOTE</a></li>
        <li><a href="./register.html" class="cta-btn">Register Now</a></li>
      </ul>
    </div>
  </header>

  <main>
    <div class="container">
      <h2>Register your School</h2>
      <p class="subtext">Fill in the form below and make payment to complete your registration</p>

      <div class="info-box">
        <div class="info-text">
          <p><strong>Registration Fee:</strong> <b>â‚¦5000</b> per Contestant</p>
          <p><strong>Account Number:</strong> 0052554753</p>
          <p><strong>Account Name:</strong> Braintree Academy</p>
          <p><strong>Bank:</strong> Paypal</p>
        </div>

        <label class="upload-box">
          <div>
            <img src="https://www.svgrepo.com/show/508784/upload-cloud.svg" alt="upload" width="50" />
            <p>Upload your proof of payment here</p>
          </div>
          <input type="file" id="payment-proof" required />
        </label>
      </div>

      <form id="registrationForm">
        <div class="form-row">
          <div class="form-group">
            <input type="text" id="schoolName" placeholder="Name of school" required />
          </div>
          <div class="form-group">
            <input type="email" id="schoolEmail" placeholder="Email Address" required />
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <input type="text" id="location" placeholder="Local Government Area" required />
          </div>
          <div class="form-group">
            <input type="text" id="studentClass" placeholder="Class" />
          </div>
        </div>

        <!-- Additional contestant inputs can be added later as needed -->
          <div class="form-row">
            <div class="form-group">
              <input type="text" id="contestant1" placeholder="Contestant 1" required />
            </div>
            <div class="form-group">
              <select id="activity1" required>
                <option value="">Select Activity</option>
                <option value="debate">Debate</option>
                <option value="quiz">Quiz</option>
                <option value="spelling">Spelling Bee</option>
              </select>
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <input type="text" id="contestant2" placeholder="Contestant 2" required />
            </div>
            <div class="form-group">
              <select id="activity2" required>
                <option value="">Select Activity</option>
                <option value="debate">Debate</option>
                <option value="quiz">Quiz</option>
                <option value="spelling">Spelling Bee</option>
              </select>
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <input type="text" id="contestant3" placeholder="Contestant 3" required />
            </div>
            <div class="form-group">
              <select id="activity3" required>
                <option value="">Select Activity</option>
                <option value="debate">Debate</option>
                <option value="quiz">Quiz</option>
                <option value="spelling">Spelling Bee</option>
              </select>
            </div>
          </div>  

        <button type="button" id="payButton">Simulate PayPal Payment</button>
        <button type="submit" id="submitBtn" disabled>Register School</button>

        <div id="responseMessage" style="margin: 10px 0; font-weight: bold;"></div>

      </form>
              <!-- Confirmation Modal -->
        <div id="confirmationModal" class="modal">
          <div class="modal-content">
            <span class="close" id="closeModal">&times;</span>
            <h2>Registration Successful ðŸŽ‰</h2>
            <p>Redirecting to voting page...</p>
          </div>
        </div>
    </div>
  </main>

<footer class="footer">
        <div class="footer-content">
            <div class="footer-logo">
                <img src="./assets/Assets/logo.jpg" alt="Company Logo" class="logo">
                <span>Braintree Company</span>
            </div>
            <div class="footer-links">
                <ul>
                    <li><a href="./register.html">HOME</a></li>
                    <li><a href="./register.html">REGISTER</a></li>
                    <li><a href="./vote.html">VOTE</a></li>
                </ul>
            </div>
            <div class="footer-social">
                <a href="#" class="social-icon"><img src="facebook-icon.png" alt="Facebook"></a>
                <a href="#" class="social-icon"><img src="twitter-icon.png" alt="Twitter"></a>
                <a href="#" class="social-icon"><img src="instagram-icon.png" alt="Instagram"></a>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2024 My Website. All rights reserved.</p>
        </div>
</footer>

      <script>
      document.addEventListener('DOMContentLoaded', () => {
      const form = document.getElementById('registrationForm');
      const payButton = document.getElementById('payButton');
      const submitBtn = document.getElementById('submitBtn');
      const confirmationModal = document.getElementById('confirmationModal');
      const closeModal = document.getElementById('closeModal');

      // Disable submit initially
      submitBtn.disabled = true;

      // Simulate PayPal Payment
      payButton.addEventListener('click', () => {
        payButton.textContent = "Processing Payment...";
        payButton.disabled = true;

        setTimeout(() => {
          payButton.textContent = "Payment Complete âœ…";
          submitBtn.disabled = false;
        }, 2000);
      });

      // Form submission
      form.addEventListener('submit', async (e) => {
        e.preventDefault();

        const data = {
          schoolName: document.getElementById('schoolName')?.value,
          email: document.getElementById('schoolEmail')?.value,
          location: document.getElementById('location')?.value,
          studentClass: document.getElementById('studentClass')?.value,
          contestants: [
            {
              name: document.getElementById('contestant1')?.value,
              activity: document.getElementById('activity1')?.value
            },
            {
              name: document.getElementById('contestant2')?.value,
              activity: document.getElementById('activity2')?.value
            },
            {
              name: document.getElementById('contestant3')?.value,
              activity: document.getElementById('activity3')?.value
            }
          ]
        };

        try {
          const res = await fetch(`${BACKEND_URL}/api/register`, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(data)
          });

          const result = await res.json();
          console.log("Server response:", data.message); // Debug line

          if (response.ok) {
            confirmationModal.style.display = 'flex';
            setTimeout(() => {
              confirmationModal.style.display = 'none';
              window.location.href = '/vote.html';
            }, 2000);
          } else {
            alert('Registration failed. Try again.');
          }
        } catch (error) {
          console.error('Error:', error);
          alert('Something went wrong.');
        }
      });

      // Close modal manually
      closeModal.addEventListener('click', () => {
        confirmationModal.style.display = 'none';
      });
    });
  </script>

  <script src="./script.js"></script>
</body>
</html>
